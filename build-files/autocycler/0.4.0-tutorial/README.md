# autocycler container

Main tool: [autocycler](https://github.com/rrwick/Autocycler/)
  
Code repository: https://github.com/rrwick/Autocycler/

<details>

<summary>Additional tools installed via micromamba:</summary>

```
  Name                       Version               Build               Channel    
────────────────────────────────────────────────────────────────────────────────────
  _libgcc_mutex              0.1                   conda_forge         conda-forge
  _openmp_mutex              4.5                   2_gnu               conda-forge
  alsa-lib                   1.2.14                hb9d3cd8_0          conda-forge
  any2fasta                  0.4.2                 hdfd78af_3          bioconda   
  attr                       2.5.1                 h166bdaf_1          conda-forge
  boost-cpp                  1.85.0                h3c6214e_4          conda-forge
  bwa                        0.7.19                h577a1d6_0          bioconda   
  bzip2                      1.0.8                 h4bc722e_7          conda-forge
  c-ares                     1.34.5                hb9d3cd8_0          conda-forge
  ca-certificates            2025.4.26             hbd8a1cb_0          conda-forge
  cairo                      1.18.4                h3394656_0          conda-forge
  canu                       2.3                   h3fb4750_1          bioconda   
  cyrus-sasl                 2.1.27                h54b06d7_7          conda-forge
  dbus                       1.13.6                h5008d03_3          conda-forge
  expat                      2.7.0                 h5888daf_0          conda-forge
  flye                       2.9.5                 py312h5e9d817_2     bioconda   
  font-ttf-dejavu-sans-mono  2.37                  hab24e00_0          conda-forge
  font-ttf-inconsolata       3.000                 h77eed37_0          conda-forge
  font-ttf-source-code-pro   2.038                 h77eed37_0          conda-forge
  font-ttf-ubuntu            0.83                  h77eed37_3          conda-forge
  fontconfig                 2.15.0                h7e30c49_1          conda-forge
  fonts-conda-ecosystem      1                     0                   conda-forge
  fonts-conda-forge          1                     0                   conda-forge
  freetype                   2.13.3                ha770c72_1          conda-forge
  fribidi                    1.0.10                h36c2ea0_0          conda-forge
  gettext                    0.24.1                h5888daf_0          conda-forge
  gettext-tools              0.24.1                h5888daf_0          conda-forge
  giflib                     5.2.2                 hd590300_0          conda-forge
  glib                       2.84.1                h6287aef_1          conda-forge
  glib-tools                 2.84.1                h4833e2c_1          conda-forge
  gnuplot                    5.4.10                hb1719d7_0          conda-forge
  graphite2                  1.3.13                h59595ed_1003       conda-forge
  gst-plugins-base           1.24.11               h651a532_0          conda-forge
  gstreamer                  1.24.11               hc37bda9_0          conda-forge
  harfbuzz                   11.1.0                h3beb420_0          conda-forge
  htslib                     1.21                  h566b1c6_1          bioconda   
  icu                        75.1                  he02047a_0          conda-forge
  k8                         1.2                   h6618dc6_3          bioconda   
  kernel-headers_linux-64    3.10.0                he073ed8_18         conda-forge
  keyutils                   1.6.1                 h166bdaf_0          conda-forge
  krb5                       1.21.3                h659f571_0          conda-forge
  lame                       3.100                 h166bdaf_1003       conda-forge
  lcms2                      2.17                  h717163a_0          conda-forge
  ld_impl_linux-64           2.43                  h712a8e2_4          conda-forge
  lerc                       4.0.0                 h0aef613_1          conda-forge
  libasprintf                0.24.1                h8e693c7_0          conda-forge
  libasprintf-devel          0.24.1                h8e693c7_0          conda-forge
  libboost                   1.85.0                h0ccab89_4          conda-forge
  libboost-devel             1.85.0                h00ab1b0_4          conda-forge
  libboost-headers           1.85.0                ha770c72_4          conda-forge
  libcap                     2.75                  h39aace5_0          conda-forge
  libclang-cpp20.1           20.1.4                default_h1df26ce_0  conda-forge
  libclang13                 20.1.4                default_he06ed0a_0  conda-forge
  libcups                    2.3.3                 h4637d8d_4          conda-forge
  libcurl                    8.13.0                h332b0f4_0          conda-forge
  libdeflate                 1.23                  h86f0d12_0          conda-forge
  libdrm                     2.4.124               hb9d3cd8_0          conda-forge
  libedit                    3.1.20250104          pl5321h7949ede_0    conda-forge
  libegl                     1.7.0                 ha4b6fd6_2          conda-forge
  libev                      4.33                  hd590300_2          conda-forge
  libevent                   2.1.12                hf998b51_1          conda-forge
  libexpat                   2.7.0                 h5888daf_0          conda-forge
  libffi                     3.4.6                 h2dba641_1          conda-forge
  libflac                    1.4.3                 h59595ed_0          conda-forge
  libfreetype                2.13.3                ha770c72_1          conda-forge
  libfreetype6               2.13.3                h48d6fc4_1          conda-forge
  libgcc                     14.2.0                h767d61c_2          conda-forge
  libgcc-ng                  14.2.0                h69a702a_2          conda-forge
  libgcrypt-lib              1.11.0                hb9d3cd8_2          conda-forge
  libgd                      2.3.3                 h6f5c62b_11         conda-forge
  libgettextpo               0.24.1                h5888daf_0          conda-forge
  libgettextpo-devel         0.24.1                h5888daf_0          conda-forge
  libgl                      1.7.0                 ha4b6fd6_2          conda-forge
  libglib                    2.84.1                h3618099_1          conda-forge
  libglvnd                   1.7.0                 ha4b6fd6_2          conda-forge
  libglx                     1.7.0                 ha4b6fd6_2          conda-forge
  libgomp                    14.2.0                h767d61c_2          conda-forge
  libgpg-error               1.55                  h3f2d84a_0          conda-forge
  libiconv                   1.18                  h4ce23a2_1          conda-forge
  libjpeg-turbo              3.1.0                 hb9d3cd8_0          conda-forge
  libllvm20                  20.1.4                he9d0ab4_0          conda-forge
  liblzma                    5.8.1                 hb9d3cd8_1          conda-forge
  liblzma-devel              5.8.1                 hb9d3cd8_1          conda-forge
  libnghttp2                 1.64.0                h161d5f1_0          conda-forge
  libnsl                     2.0.1                 hd590300_0          conda-forge
  libntlm                    1.8                   hb9d3cd8_0          conda-forge
  libogg                     1.3.5                 hd0c01bc_1          conda-forge
  libopus                    1.5.2                 hd0c01bc_0          conda-forge
  libpciaccess               0.18                  hd590300_0          conda-forge
  libpng                     1.6.47                h943b412_0          conda-forge
  libpq                      17.4                  h27ae623_1          conda-forge
  libsndfile                 1.2.2                 hc60ed4a_1          conda-forge
  libsqlite                  3.49.1                hee588c1_2          conda-forge
  libssh2                    1.11.1                hcf80075_0          conda-forge
  libstdcxx                  14.2.0                h8f9b012_2          conda-forge
  libstdcxx-ng               14.2.0                h4852527_2          conda-forge
  libsystemd0                257.4                 h4e0b6ca_1          conda-forge
  libtiff                    4.7.0                 hd9ff511_4          conda-forge
  libuuid                    2.38.1                h0b41bf4_0          conda-forge
  libvorbis                  1.3.7                 h9c3ff4c_0          conda-forge
  libwebp-base               1.5.0                 h851e524_0          conda-forge
  libxcb                     1.17.0                h8a09558_0          conda-forge
  libxcrypt                  4.4.36                hd590300_1          conda-forge
  libxkbcommon               1.9.1                 h65c71a3_0          conda-forge
  libxml2                    2.13.7                h4bc477f_1          conda-forge
  libzlib                    1.3.1                 hb9d3cd8_2          conda-forge
  lz4-c                      1.10.0                h5888daf_1          conda-forge
  metamdbg                   1.1                   h077b44d_2          bioconda   
  miniasm                    0.3                   h577a1d6_5          bioconda   
  minimap2                   2.28                  h577a1d6_4          bioconda   
  minipolish                 0.1.3                 pyhdfd78af_0        bioconda   
  mpg123                     1.32.9                hc50e24c_0          conda-forge
  mysql-common               9.0.1                 h266115a_6          conda-forge
  mysql-libs                 9.0.1                 he0572af_6          conda-forge
  ncurses                    6.5                   h2d0b736_3          conda-forge
  necat                      0.0.1_update20200803  h5ca1c30_6          bioconda   
  nextdenovo                 2.5.2                 py312h4e9d295_6     bioconda   
  nextpolish                 1.4.1                 py312h4e9d295_4     bioconda   
  nspr                       4.36                  h5888daf_0          conda-forge
  nss                        3.111                 h159eef7_0          conda-forge
  openjdk                    23.0.2                h53dfc1b_2          conda-forge
  openldap                   2.6.9                 he970967_0          conda-forge
  openssl                    3.5.0                 h7b32b05_1          conda-forge
  packaging                  25.0                  pyh29332c3_1        conda-forge
  pango                      1.56.3                h9ac818e_1          conda-forge
  paralleltask               0.1.1                 pyhd8ed1ab_0        conda-forge
  pcre2                      10.45                 hc749103_0          conda-forge
  perl                       5.32.1                7_hd590300_perl5    conda-forge
  perl-env                   1.04                  pl5321hd8ed1ab_0    conda-forge
  perl-filesys-df            0.92                  pl5321h7b50bb2_9    bioconda   
  pip                        25.1.1                pyh8b19718_0        conda-forge
  pixman                     0.46.0                h29eaf8c_0          conda-forge
  psutil                     7.0.0                 py312h66e93f0_0     conda-forge
  pthread-stubs              0.4                   hb9d3cd8_1002       conda-forge
  pulseaudio-client          17.0                  hac146a9_1          conda-forge
  python                     3.12.10               h9e4cc4f_0_cpython  conda-forge
  python-edlib               1.3.9.post1           py312hf731ba3_2     bioconda   
  python_abi                 3.12                  7_cp312             conda-forge
  qt-main                    5.15.15               h993ce98_3          conda-forge
  racon                      1.5.0                 h077b44d_6          bioconda   
  raven-assembler            1.8.3                 h5ca1c30_3          bioconda   
  readline                   8.2                   h8c095d6_2          conda-forge
  samtools                   1.21                  h96c455f_1          bioconda   
  seqtk                      1.4                   h577a1d6_3          bioconda   
  setuptools                 80.1.0                pyhff2d567_0        conda-forge
  sysroot_linux-64           2.17                  h0157908_18         conda-forge
  time                       1.8                   hd590300_0          conda-forge
  tk                         8.6.13                noxft_h4845f30_101  conda-forge
  tzdata                     2025b                 h78e105d_0          conda-forge
  wheel                      0.45.1                pyhd8ed1ab_1        conda-forge
  wtdbg                      2.5                   h5ca1c30_5          bioconda   
  xcb-util                   0.4.1                 hb711507_2          conda-forge
  xcb-util-image             0.4.0                 hb711507_2          conda-forge
  xcb-util-keysyms           0.4.1                 hb711507_0          conda-forge
  xcb-util-renderutil        0.3.10                hb711507_0          conda-forge
  xcb-util-wm                0.4.2                 hb711507_0          conda-forge
  xkeyboard-config           2.44                  hb9d3cd8_0          conda-forge
  xorg-libice                1.1.2                 hb9d3cd8_0          conda-forge
  xorg-libsm                 1.2.6                 he73a12e_0          conda-forge
  xorg-libx11                1.8.12                h4f16b4b_0          conda-forge
  xorg-libxau                1.0.12                hb9d3cd8_0          conda-forge
  xorg-libxdamage            1.1.6                 hb9d3cd8_0          conda-forge
  xorg-libxdmcp              1.1.5                 hb9d3cd8_0          conda-forge
  xorg-libxext               1.3.6                 hb9d3cd8_0          conda-forge
  xorg-libxfixes             6.0.1                 hb9d3cd8_0          conda-forge
  xorg-libxi                 1.8.2                 hb9d3cd8_0          conda-forge
  xorg-libxrandr             1.5.4                 hb9d3cd8_0          conda-forge
  xorg-libxrender            0.9.12                hb9d3cd8_0          conda-forge
  xorg-libxshmfence          1.3.3                 hb9d3cd8_0          conda-forge
  xorg-libxt                 1.3.1                 hb9d3cd8_0          conda-forge
  xorg-libxtst               1.2.5                 hb9d3cd8_3          conda-forge
  xorg-libxxf86vm            1.1.6                 hb9d3cd8_0          conda-forge
  xz                         5.8.1                 hbcc6ac9_1          conda-forge
  xz-gpl-tools               5.8.1                 hbcc6ac9_1          conda-forge
  xz-tools                   5.8.1                 hb9d3cd8_1          conda-forge
  zlib                       1.3.1                 hb9d3cd8_2          conda-forge
  zstd                       1.5.7                 hb8e6e7a_2          conda-forge
```

</details>

Basic information on how to use this tool:
- executable: autocycler
- help: --help
- version: --version
- description: |

> Autocycler is a tool for generating consensus long-read assemblies for bacterial genomes.

Additional information:

This image contains all additional tools listed in the environmental.yml file.
  
Full documentation: [https://github.com/rrwick/Autocycler/wiki](https://github.com/rrwick/Autocycler/wiki)

## Example Usage

```bash
reads=ont.fastq.gz  # your read set goes here
threads=16  # set as appropriate for your system
genome_size=$(genome_size_raven.sh "$reads" "$threads")  # can set this manually if you know the value

# Step 1: subsample the long-read set into multiple files
autocycler subsample --reads "$reads" --out_dir subsampled_reads --genome_size "$genome_size"

# Step 2: assemble each subsampled file
mkdir assemblies
for assembler in canu flye miniasm necat nextdenovo raven; do
    for i in 01 02 03 04; do
        "$assembler".sh subsampled_reads/sample_"$i".fastq assemblies/"$assembler"_"$i" "$threads" "$genome_size"
    done
done

# Optional step: remove the subsampled reads to save space
rm subsampled_reads/*.fastq

# Step 3: compress the input assemblies into a unitig graph
autocycler compress -i assemblies -a autocycler_out

# Step 4: cluster the input contigs into putative genomic sequences
autocycler cluster -a autocycler_out

# Steps 5 and 6: trim and resolve each QC-pass cluster
for c in autocycler_out/clustering/qc_pass/cluster_*; do
    autocycler trim -c "$c"
    autocycler resolve -c "$c"
done

# Step 7: combine resolved clusters into a final assembly
autocycler combine -a autocycler_out -i autocycler_out/clustering/qc_pass/cluster_*/5_final.gfa
```
